#!/usr/bin/env php
<?php

use Lkrms\App\App;
use Lkrms\Cli\Cli;
use Lkrms\Time\ClockifyProvider;
use Lkrms\Time\Command\GenerateInvoices;
use Lkrms\Time\Command\ListClients;
use Lkrms\Time\XeroProvider;

require (__DIR__ . "/../vendor/autoload.php");

ini_set("memory_limit", "-1");

$app = App::load(dirname(__DIR__));
$app->enableCache();

XeroProvider::bind();
XeroProvider::bindInterfaces();
ClockifyProvider::bind();
ClockifyProvider::bindInterfaces();

ListClients::register(["client", "list"]);
GenerateInvoices::register(["invoice", "generate"]);

$status = Cli::run();
exit ($status);
